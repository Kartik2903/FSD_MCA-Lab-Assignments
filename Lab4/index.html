<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 4</title>

    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="justify-center items-center bg-[#f0ebf8] flex p-4">
    <section class="min-h-screen flex p-6">
        <div class=" bg-white rounded-lg shadow-lg p-8 w-[672px]">
            <h1 class="text-2xl font-bold mb-4">Student Feedback Form</h1>

            <p id="welcomeMsg" class="mb-4 text-green-600 font-medium hidden">
            </p>

            <form id="feedbackForm" class="space-y-6">
                <!-- Name -->
                <div>
                    <label class="block mb-1 font-medium">Full Name:</label>
                    <input type="text" id="name" placeholder="Name" class="w-full border-gray-300 border-2 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-purple-500"/>
                </div>

                <!-- Email -->
                <div>
                    <label class="block mb-1 font-medium">Email:</label>
                    <input type="email" id="email" placeholder="Email" class="w-full border-gray-300 border-2 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-purple-500"/>
                </div>

                <!-- Department -->
                <div>
                <label class="block mb-1 font-medium">Department:</label>
                <select id="department" required
                    class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="">Select Department</option>
                    <option>Computer Science</option>
                    <option>Mechanical</option>
                    <option>Civil</option>
                    <option>Electrical</option>
                </select>
                </div>
                
                <!-- Rating -->
                 <div>
                <label class="block mb-1 font-medium">Session Rating:</label>
                    <div class="flex space-x-4">
                        <label><input type="radio" name="rating" value="1" required>1</label>
                        <label><input type="radio" name="rating" value="2" required>2</label>
                        <label><input type="radio" name="rating" value="3" required>3</label>
                        <label><input type="radio" name="rating" value="4" required>4</label>
                        <label><input type="radio" name="rating" value="5" required>5</label>
                    </div>
                </div>

                <!-- Comments -->
                <div>
                    <label class="block mb-1 font-medium">Comments:</label>
                    <textarea placeholder="Write your comments here..." id="comments" class="w-full border border-gray-500 rounded-md p-2 focus:outline-none focus: ring-purple-500"></textarea>
                    <p id="charCount" class="text-sm text-gray-500 mt-1">0/200</p>
                </div>

                <!-- Submit Button -->
                <button type="submit"
                class="bg-purple-800 text-white px-4 py-2 rounded-md hover:bg-purple-900">
                Submit Feedback
                </button>
            </form>

            <!-- Clear Button -->
            <div class="mt-6">
            <button id="clearBtn" type="button"
                class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600">
                Clear All Feedbacks
            </button>
            </div>

            <!-- Feedback list -->
            <h2 class="text-xl font-bold mt-10 mb-4">Submitted Feedbacks</h2>
            <div id="feedbackList" class="space-y-4"></div>

            </div>
    </section>
    




    <script>
  
  const form = document.getElementById('feedbackForm');
  const comments = document.getElementById('comments');
  const charCount = document.getElementById('charCount');
  const feedbackList = document.getElementById('feedbackList');
  const clearBtn = document.getElementById('clearBtn');
  const welcomeMsg = document.getElementById('welcomeMsg');

  // character count
  comments.addEventListener('input', () => {
    charCount.textContent = `${comments.value.length}/200`;
  });

  // get feedbacks
  function getFeedbacks() {
    const stored = localStorage.getItem('feedbacks');
    return stored ? JSON.parse(stored) : [];
  }

  // render feedbacks
  function displayFeedbacks() {
    const feedbacks = getFeedbacks();
    feedbackList.innerHTML = '';

    feedbacks.forEach(fb => {
      const card = document.createElement('div');
      card.className = 'bg-gray-50 p-4 rounded-lg shadow';

      card.innerHTML = `
        <h3 class="font-semibold text-lg">${fb.name}</h3>
        <p class="text-sm text-gray-600">${fb.department} | Rating: ${fb.rating}</p>
        <p class="mt-2">${fb.comments || '(No comments)'}</p>
        <p class="text-xs text-gray-400 mt-2">${fb.time}</p>
      `;

      feedbackList.appendChild(card);
    });
  }

  // show feedbacks on load
  displayFeedbacks();

  // form submit
  form.addEventListener('submit', (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const department = document.getElementById('department').value;
    const rating = form.rating.value;
    const commentsText = document.getElementById('comments').value.trim();

    const feedback = {
      name,
      email,
      department,
      rating,
      comments: commentsText,
      time: new Date().toLocaleString()
    };

    const feedbacks = getFeedbacks();
    feedbacks.push(feedback);
    localStorage.setItem('feedbacks', JSON.stringify(feedbacks));

    form.reset();
    charCount.textContent = '0/200';

    displayFeedbacks();
    alert('Feedback submitted! (Saved in localStorage)');
  });

  // clear button
  clearBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to clear all feedbacks?')) {
      localStorage.removeItem('feedbacks');
      displayFeedbacks();
    }
  });

  // Check sessionStorage
    if (sessionStorage.getItem('visited')) {
    welcomeMsg.classList.remove('hidden');
    } else {
    sessionStorage.setItem('visited', 'true');
    }
</script>


</body>
</html>